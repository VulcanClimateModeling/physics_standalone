#!/usr/bin/env python3
import numpy as np
import matplotlib.pyplot as plt

time = {0.0: {32.0: 0.0015091262757778168, 64.0: 0.0007412480190396309, 128.0: 0.0007657827809453011, 256.0: 0.0007800599560141563, 512.0: 0.0009532328695058823, 1024.0: 0.0010030968114733696, 2048.0: 0.0013087689876556396, 4096.0: 0.001799548976123333, 8192.0: 0.002831551246345043, 16384.0: 0.004975736141204834, 32768.0: 0.009082560427486897},
        0.01: {32.0: 0.0007485169917345047, 64.0: 0.000718667171895504, 128.0: 0.0008925283327698708, 256.0: 0.000884760171175003, 512.0: 0.0010677166283130646, 1024.0: 0.0012569166719913483, 2048.0: 0.0016986345872282982, 4096.0: 0.002630027011036873, 8192.0: 0.0039867497980594635, 16384.0: 0.006732596084475517, 32768.0: 0.012488553300499916},
        0.05: {32.0: 0.0007980698719620705, 64.0: 0.0008788555860519409, 128.0: 0.0008109509944915771, 256.0: 0.0008383765816688538, 512.0: 0.0011367090046405792, 1024.0: 0.0012840209528803825, 2048.0: 0.0016555339097976685, 4096.0: 0.0023471126332879066, 8192.0: 0.004070747643709183, 16384.0: 0.007246117107570171, 32768.0: 0.013215100392699242},
        0.1: {32.0: 0.0008193487301468849, 64.0: 0.000791977159678936, 128.0: 0.000812445767223835, 256.0: 0.0009107058867812157, 512.0: 0.0011534187942743301, 1024.0: 0.0014201067388057709, 2048.0: 0.001752663403749466, 4096.0: 0.0026306314393877983, 8192.0: 0.0044357310980558395, 16384.0: 0.007671368308365345, 32768.0: 0.014234649948775768},
        0.25: {32.0: 0.0008283276110887527, 64.0: 0.0008005136623978615, 128.0: 0.0008324664086103439, 256.0: 0.0009396355599164963, 512.0: 0.0011428724974393845, 1024.0: 0.0014527933672070503, 2048.0: 0.001973366364836693, 4096.0: 0.0031389929354190826, 8192.0: 0.005365265533328056, 16384.0: 0.010118616744875908, 32768.0: 0.01878553070127964},
        0.5: {32.0: 0.0007966877892613411, 64.0: 0.000811474397778511, 128.0: 0.0009410511702299118, 256.0: 0.0009469324722886086, 512.0: 0.001323128119111061, 1024.0: 0.0017673484981060028, 2048.0: 0.002586035057902336, 4096.0: 0.004040399566292763, 8192.0: 0.00732828676700592, 16384.0: 0.01345386914908886, 32768.0: 0.026521638967096806},
        0.75: {32.0: 0.0008209859952330589, 64.0: 0.0009633591398596764, 128.0: 0.0010907221585512161, 256.0: 0.0011941250413656235, 512.0: 0.0015643443912267685, 1024.0: 0.0019696736708283424, 2048.0: 0.003229099325835705, 4096.0: 0.005424308590590954, 8192.0: 0.009688352234661579, 16384.0: 0.018903235904872417, 32768.0: 0.034943608567118645},
        0.9: {32.0: 0.0008839322254061699, 64.0: 0.0008509941399097443, 128.0: 0.0009040255099534988, 256.0: 0.0010923082008957863, 512.0: 0.0014288155362010002, 1024.0: 0.0020021507516503334, 2048.0: 0.003555399365723133, 4096.0: 0.005710488185286522, 8192.0: 0.010512620210647583, 16384.0: 0.020987004972994328, 32768.0: 0.04106109123677015},
        0.95: {32.0: 0.0009003309532999992, 64.0: 0.0009117824956774712, 128.0: 0.0010094931349158287, 256.0: 0.001138603314757347, 512.0: 0.0015274155884981155, 1024.0: 0.00219929963350296, 2048.0: 0.0036293435841798782, 4096.0: 0.005995855666697025, 8192.0: 0.010944260284304619, 16384.0: 0.02151608746498823, 32768.0: 0.04074015561491251},
        0.99: {32.0: 0.0008293623104691505, 64.0: 0.0009193886071443558, 128.0: 0.0009256172925233841, 256.0: 0.0011417865753173828, 512.0: 0.00162531528621912, 1024.0: 0.0023590074852108955, 2048.0: 0.003729049116373062, 4096.0: 0.006103928200900555, 8192.0: 0.010529618710279465, 16384.0: 0.021175436675548553, 32768.0: 0.04142187815159559},
        1.0: {32.0: 0.0008441898971796036, 64.0: 0.0007948456332087517, 128.0: 0.0009314166381955147, 256.0: 0.001036577858030796, 512.0: 0.0014930106699466705, 1024.0: 0.0021677231416106224, 2048.0: 0.003551189787685871, 4096.0: 0.006031458266079426, 8192.0: 0.011282483115792274, 16384.0: 0.022478722967207432, 32768.0: 0.0446084002032876}}

time_gt4py_numpy = {0.0: {32.0: 0.013850055634975433, 64.0: 0.011679395101964474,
    128.0: 0.01199669111520052, 256.0: 0.013053840957581997, 512.0: 0.014879311434924603, 1024.0: 0.015762687660753727, 2048.0: 0.018701720982789993, 4096.0: 0.027598119340837002, 8192.0: 0.03957743104547262, 16384.0: 0.06688497215509415, 32768.0: 0.12424621731042862},
        0.01: {32.0: 0.011319921351969242, 64.0: 0.011477026157081127, 128.0: 0.011655622161924839, 256.0: 0.012022665701806545, 512.0: 0.013183464296162128, 1024.0: 0.01597628090530634, 2048.0: 0.018686999566853046, 4096.0: 0.025212611071765423, 8192.0: 0.03861673269420862, 16384.0: 0.07023744191974401, 32768.0: 0.12001095525920391},
        0.05: {32.0: 0.01084278803318739, 64.0: 0.010823075659573078, 128.0: 0.011061838828027248, 256.0: 0.013048474676907063, 512.0: 0.013832512311637402, 1024.0: 0.015930342487990856, 2048.0: 0.018418356776237488, 4096.0: 0.03020468447357416, 8192.0: 0.04366767778992653, 16384.0: 0.08115843869745731, 32768.0: 0.12947156000882387},
        0.1: {32.0: 0.011420268565416336, 64.0: 0.01153178233653307, 128.0: 0.01265577133744955, 256.0: 0.013436715118587017, 512.0: 0.014609327539801598, 1024.0: 0.01556030660867691, 2048.0: 0.019935269840061665, 4096.0: 0.027008824981749058, 8192.0: 0.04559930972754955, 16384.0: 0.06874471809715033, 32768.0: 0.14247504621744156},
        0.25: {32.0: 0.012807206250727177, 64.0: 0.013016053475439548, 128.0: 0.013156477361917496, 256.0: 0.013113339431583881, 512.0: 0.013779288157820702, 1024.0: 0.01575128734111786, 2048.0: 0.020711418241262436, 4096.0: 0.02840900793671608, 8192.0: 0.0444728871807456, 16384.0: 0.07167090848088264, 32768.0: 0.1270750965923071},
        0.5: {32.0: 0.013377140276134014, 64.0: 0.013313939794898033, 128.0: 0.013667100109159946, 256.0: 0.013085487298667431, 512.0: 0.014844341203570366, 1024.0: 0.016984006389975548, 2048.0: 0.02046059723943472, 4096.0: 0.02936384454369545, 8192.0: 0.045571211725473404, 16384.0: 0.0758363138884306, 32768.0: 0.13220118265599012},
        0.75: {32.0: 0.012492924928665161, 64.0: 0.01209784485399723, 128.0: 0.01274412777274847, 256.0: 0.013208476826548576, 512.0: 0.013594841584563255, 1024.0: 0.01587815396487713, 2048.0: 0.019410024397075176, 4096.0: 0.02812079433351755, 8192.0: 0.04179542325437069, 16384.0: 0.06988798268139362, 32768.0: 0.13464856427162886},
        0.9: {32.0: 0.01109673548489809, 64.0: 0.011481620371341705, 128.0: 0.012190554291009903, 256.0: 0.012586133554577827, 512.0: 0.014395591802895069, 1024.0: 0.016775475814938545, 2048.0: 0.02094089798629284, 4096.0: 0.03153693117201328, 8192.0: 0.04253214318305254, 16384.0: 0.07430523913353682, 32768.0: 0.14310713298618793},
        0.95: {32.0: 0.012556842528283596, 64.0: 0.011819575913250446, 128.0: 0.01226805429905653, 256.0: 0.01323008444160223, 512.0: 0.014560161158442497, 1024.0: 0.01708228513598442, 2048.0: 0.020249666646122932, 4096.0: 0.02783115953207016, 8192.0: 0.04075714759528637, 16384.0: 0.06955361645668745, 32768.0: 0.13081479538232088},
        0.99: {32.0: 0.012606950476765633, 64.0: 0.0123190488666296, 128.0: 0.012478950433433056, 256.0: 0.012975405901670456, 512.0: 0.013896269723773003, 1024.0: 0.015610061585903168, 2048.0: 0.01810968481004238, 4096.0: 0.025049946270883083, 8192.0: 0.04248395375907421, 16384.0: 0.072352877818048, 32768.0: 0.1379718678072095},
        1.0: {32.0: 0.010812445543706417, 64.0: 0.010525870136916637, 128.0: 0.01165060792118311, 256.0: 0.01226071361452341, 512.0: 0.01296532154083252, 1024.0: 0.014982135035097599, 2048.0: 0.017714968882501125, 4096.0: 0.02547405194491148, 8192.0: 0.04075413942337036, 16384.0: 0.07611491065472364, 32768.0: 0.1420851955190301}}

time_gt4py_gtx86 = {0.0: {32.0: 0.014783279970288277, 64.0: 0.006690235808491707, 128.0: 0.008592596277594566, 256.0: 0.006291914731264114, 512.0: 0.007057658396661282, 1024.0: 0.007860347628593445, 2048.0: 0.007575025781989098, 4096.0: 0.006697468459606171, 8192.0: 0.007078411988914013, 16384.0: 0.009180711582303047, 32768.0: 0.012969333678483963},
        0.01: {32.0: 0.006034893915057182, 64.0: 0.006037811748683453, 128.0: 0.006201312877237797, 256.0: 0.006133809685707092, 512.0: 0.006948631256818771, 1024.0: 0.007006609812378883, 2048.0: 0.008607730269432068, 4096.0: 0.007439938373863697, 8192.0: 0.009914616122841835, 16384.0: 0.009580724872648716, 32768.0: 0.009946114383637905},
        0.05: {32.0: 0.0102059505879879, 64.0: 0.008198411203920841, 128.0: 0.006166757084429264, 256.0: 0.005998346954584122, 512.0: 0.0062086982652544975, 1024.0: 0.006132503971457481, 2048.0: 0.006889859214425087, 4096.0: 0.007192808203399181, 8192.0: 0.008679013699293137, 16384.0: 0.008376439101994038, 32768.0: 0.013963804580271244},
        0.1: {32.0: 0.006090480834245682, 64.0: 0.006011229008436203, 128.0: 0.007801615633070469, 256.0: 0.005943584255874157, 512.0: 0.006660044193267822, 1024.0: 0.006233409978449345, 2048.0: 0.007255051285028458, 4096.0: 0.00680067203938961, 8192.0: 0.009109234437346458, 16384.0: 0.008630800060927868, 32768.0: 0.01069754920899868},
        0.25: {32.0: 0.006134768016636372, 64.0: 0.006232708692550659, 128.0: 0.0072282105684280396, 256.0: 0.0063038356602191925, 512.0: 0.0067535825073719025, 1024.0: 0.008356882259249687, 2048.0: 0.010170584544539452, 4096.0: 0.010676355101168156, 8192.0: 0.01195847149938345, 16384.0: 0.014088721945881844, 32768.0: 0.028765900060534477},
        0.5: {32.0: 0.009903622791171074, 64.0: 0.006994685158133507, 128.0: 0.008279536850750446, 256.0: 0.007306446321308613, 512.0: 0.00626701395958662, 1024.0: 0.007973178289830685, 2048.0: 0.008082306943833828, 4096.0: 0.006645004265010357, 8192.0: 0.007873292081058025, 16384.0: 0.015217357315123081, 32768.0: 0.013180485926568508}, 0.75: {32.0: 0.007795235142111778, 64.0: 0.007730153389275074, 128.0: 0.006595119833946228, 256.0: 0.0060210078954696655, 512.0: 0.00606588926166296, 1024.0: 0.006097313016653061, 2048.0: 0.006922920234501362, 4096.0: 0.006642854772508144, 8192.0: 0.007275714538991451, 16384.0: 0.008201432414352894, 32768.0: 0.011071103624999523}, 0.9: {32.0: 0.006616581231355667, 64.0: 0.0060158343985676765, 128.0: 0.0059581901878118515, 256.0: 0.006044316105544567, 512.0: 0.006021103821694851, 1024.0: 0.0061552030965685844, 2048.0: 0.008351098746061325, 4096.0: 0.007338749244809151, 8192.0: 0.007293752394616604, 16384.0: 0.011375981383025646, 32768.0: 0.01643887534737587}, 0.95: {32.0: 0.007623359560966492, 64.0: 0.006582100875675678, 128.0: 0.006376639008522034, 256.0: 0.006243995390832424, 512.0: 0.0061074234545230865, 1024.0: 0.006802920252084732, 2048.0: 0.006928629241883755, 4096.0: 0.007865474559366703, 8192.0: 0.007930188439786434, 16384.0: 0.011078538373112679, 32768.0: 0.015457958914339542}, 0.99: {32.0: 0.006418486125767231, 64.0: 0.012246807105839252, 128.0: 0.010332771576941013, 256.0: 0.007138947956264019, 512.0: 0.008696802891790867, 1024.0: 0.008086547255516052, 2048.0: 0.00854734517633915, 4096.0: 0.008449684828519821, 8192.0: 0.0091102859005332, 16384.0: 0.009747452102601528, 32768.0: 0.012232298031449318}, 1.0: {32.0: 0.005978899076581001, 64.0: 0.006199214607477188, 128.0: 0.005998372100293636, 256.0: 0.006066363304853439, 512.0: 0.006673387251794338, 1024.0: 0.00664170179516077, 2048.0: 0.006328697316348553, 4096.0: 0.006854494102299213, 8192.0: 0.007493495941162109, 16384.0: 0.00936744175851345, 32768.0: 0.012309816665947437}}

TABLE = ['time','time_gt4py_numpy','time_gt4py_gtx86']

for time_table in TABLE:
    sorted_time = sorted(eval(time_table).items(), reverse=True)
    
    plt.figure(figsize=(12,8))
    for key in sorted_time:
        lists = sorted(key[1].items()) 
        x, y = zip(*lists)
        plt.scatter(x, y, label=str(key[0]))
    
    plt.xscale('log')
    plt.yscale('log')
    plt.xlabel('number of grid points')
    plt.ylabel('elapsed time [s]')
    plt.ylim(5e-4, 2e-1)
    plt.grid()
    plt.legend()
    plt.show()
    
